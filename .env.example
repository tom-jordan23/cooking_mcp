# =================================================================
# MCP Cooking Lab Notebook - Environment Configuration Template
# =================================================================
# Copy this file to .env.production, .env.staging, or .env.development
# and fill in the appropriate values for your environment.

# =================================================================
# APPLICATION SETTINGS
# =================================================================
ENVIRONMENT=development
DEBUG=true
APP_NAME=MCP Cooking Lab Notebook
APP_VERSION=1.0.0
APP_DESCRIPTION=AI-powered cooking lab notebook with multi-channel feedback
LOG_LEVEL=INFO

# Application URLs and ports
APP_HOST=0.0.0.0
APP_PORT=8080
DOMAIN=localhost
BASE_URL=http://localhost:8080

# Security settings
SECRET_KEY=your-super-secret-key-min-32-chars-long-please-change-this-immediately
JWT_SECRET_KEY=your-jwt-secret-key-min-32-chars-long-please-change-this-too
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1440
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Rate limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# Request limits
MAX_REQUEST_SIZE=10485760  # 10MB
REQUEST_TIMEOUT=30

# CORS settings
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8080", "http://127.0.0.1:3000"]

# =================================================================
# DATABASE CONFIGURATION
# =================================================================
# PostgreSQL connection
DATABASE_URL=postgresql+asyncpg://cooking_user:your_secure_password_here@localhost:5432/cooking_mcp

# Database connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=0
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# For Docker/Production environments
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=cooking_mcp
POSTGRES_USER=cooking_user
POSTGRES_PASSWORD=your_secure_password_here

# =================================================================
# REDIS CONFIGURATION
# =================================================================
# Redis connection for caching and sessions
REDIS_URL=redis://localhost:6379/0

# Redis settings
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=your_redis_password_here
REDIS_MAX_CONNECTIONS=100

# =================================================================
# AUTHENTICATION & AUTHORIZATION
# =================================================================
# Bearer token for API access
BEARER_TOKEN=your-secure-bearer-token-here-min-32-chars

# Enable multi-factor authentication
ENABLE_MFA=false

# Session settings
SESSION_EXPIRE_MINUTES=1440
COOKIE_SECURE=false  # Set to true in production with HTTPS
COOKIE_HTTPONLY=true
COOKIE_SAMESITE=lax

# =================================================================
# SLACK INTEGRATION
# =================================================================
# Slack Bot configuration
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token
SLACK_SIGNING_SECRET=your-slack-signing-secret
SLACK_APP_TOKEN=xapp-your-slack-app-token

# Slack channels and users
SLACK_CHANNEL_NOTIFICATIONS=#cooking-notifications
SLACK_CHANNEL_ERRORS=#cooking-errors
SLACK_USER_COOK=U1234567890  # Slack user ID of primary cook
SLACK_USER_SPOUSE=U0987654321  # Slack user ID of spouse/partner

# Webhook URL for Slack commands
SLACK_WEBHOOK_URL=/slack/events

# =================================================================
# MULTI-CHANNEL NOTIFICATIONS
# =================================================================

# Telegram Bot API
TELEGRAM_BOT_TOKEN=your-telegram-bot-token
TELEGRAM_CHAT_ID=your-telegram-chat-id

# WhatsApp (via Twilio)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_WHATSAPP_FROM=whatsapp:+14155238886
TWILIO_WHATSAPP_TO=whatsapp:+1234567890

# SMS (via Twilio)
TWILIO_SMS_FROM=+1234567890
TWILIO_SMS_TO=+0987654321

# Signal Messenger
SIGNAL_SERVICE_URL=http://localhost:8080
SIGNAL_FROM_NUMBER=+1234567890
SIGNAL_TO_NUMBER=+0987654321

# Email (via SMTP)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=true
EMAIL_USERNAME=your-email@gmail.com
EMAIL_PASSWORD=your-app-password
EMAIL_FROM=your-email@gmail.com
EMAIL_TO=spouse-email@gmail.com

# Alternative: Mailgun
MAILGUN_API_KEY=your-mailgun-api-key
MAILGUN_DOMAIN=your-domain.mailgun.org
MAILGUN_FROM=noreply@your-domain.com

# =================================================================
# GIT REPOSITORY CONFIGURATION
# =================================================================
# Git settings for notebook storage
GIT_AUTHOR_NAME=Lab Bot
GIT_AUTHOR_EMAIL=lab@example.com
GIT_COMMITTER_NAME=MCP Cooking Lab
GIT_COMMITTER_EMAIL=lab@example.com

# Repository settings
REPO_ROOT=/app/notebook
GIT_BRANCH=main
AUTO_COMMIT=true
AUTO_PUSH=false  # Set to true if using remote Git repository

# Remote repository (optional)
GIT_REMOTE_URL=https://github.com/your-username/cooking-notebook.git
GIT_ACCESS_TOKEN=ghp_your_github_token_here

# =================================================================
# AI/LLM CONFIGURATION
# =================================================================
# OpenAI API
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.1

# Anthropic Claude API
ANTHROPIC_API_KEY=sk-ant-api-key-here
ANTHROPIC_MODEL=claude-3-sonnet-20240229

# Local LLM settings (for cost optimization)
LOCAL_LLM_ENABLED=false
LOCAL_LLM_MODEL=llama3:8b
LOCAL_LLM_URL=http://localhost:11434

# AI feature toggles
ENABLE_AI_INSIGHTS=true
ENABLE_AI_RECOMMENDATIONS=true
ENABLE_SEMANTIC_SEARCH=true
ENABLE_AUTO_CATEGORIZATION=true

# =================================================================
# MONITORING & OBSERVABILITY
# =================================================================
# Enable monitoring stack
ENABLE_MONITORING=true
ENABLE_METRICS=true
ENABLE_TRACING=true

# Prometheus settings
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics

# Grafana settings
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your_grafana_password

# Jaeger tracing
JAEGER_ENDPOINT=http://localhost:14268/api/traces
ENABLE_JAEGER=false

# Log settings
LOG_FORMAT=json
LOG_FILE=/app/logs/app.log
LOG_ROTATION_SIZE=100MB
LOG_RETENTION_DAYS=30

# =================================================================
# BACKUP & RECOVERY
# =================================================================
# Backup settings
ENABLE_AUTO_BACKUP=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/app/backups

# Cloud backup (optional)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-west-2
AWS_S3_BUCKET=cooking-mcp-backups

# =================================================================
# DEVELOPMENT SETTINGS
# =================================================================
# Development-specific settings (only for ENVIRONMENT=development)
DEV_RELOAD=true
DEV_AUTO_MIGRATE=true
DEV_POPULATE_SAMPLE_DATA=false
DEV_ENABLE_DEBUG_TOOLBAR=true

# Testing settings
TEST_DATABASE_URL=postgresql+asyncpg://test_user:test_pass@localhost:5432/test_cooking_mcp
TEST_REDIS_URL=redis://localhost:6379/1

# =================================================================
# PLATFORM-SPECIFIC SETTINGS
# =================================================================

# Railway deployment
RAILWAY_ENVIRONMENT=production
PORT=$PORT  # Railway sets this automatically

# Docker Compose settings
COMPOSE_PROJECT_NAME=cooking_mcp
COMPOSE_PROFILES=monitoring,backup

# Kubernetes settings
K8S_NAMESPACE=cooking-mcp
K8S_INGRESS_CLASS=nginx
K8S_TLS_SECRET_NAME=cooking-mcp-tls

# =================================================================
# FEATURE FLAGS
# =================================================================
# Feature toggles for gradual rollout
FEATURE_FEEDBACK_NORMALIZATION=true
FEATURE_SCHEDULED_NOTIFICATIONS=true
FEATURE_MULTI_CHANNEL_SUPPORT=true
FEATURE_AI_RECIPE_ANALYSIS=true
FEATURE_BATCH_OPERATIONS=true
FEATURE_EXPORT_FORMATS=true
FEATURE_RECIPE_SHARING=false  # Coming soon
FEATURE_MEAL_PLANNING=false  # Coming soon

# =================================================================
# SECURITY SETTINGS
# =================================================================
# Security headers
SECURITY_FORCE_HTTPS=false  # Set to true in production
SECURITY_HSTS_MAX_AGE=31536000
SECURITY_CONTENT_TYPE_NOSNIFF=true
SECURITY_X_FRAME_OPTIONS=DENY
SECURITY_X_XSS_PROTECTION=true

# IP allowlist (optional, comma-separated)
ALLOWED_IPS=""  # Empty means allow all

# API rate limiting per IP
API_RATE_LIMIT_PER_IP=1000
API_RATE_LIMIT_WINDOW_IP=3600

# =================================================================
# PERFORMANCE SETTINGS
# =================================================================
# Application performance
UVICORN_WORKERS=1
UVICORN_WORKER_CLASS=uvicorn.workers.UvicornWorker
UVICORN_KEEPALIVE=5
UVICORN_BACKLOG=2048

# Cache settings
CACHE_TTL=3600  # 1 hour
CACHE_MAX_SIZE=1000
ENABLE_RESPONSE_CACHING=true

# Database query optimization
DB_QUERY_TIMEOUT=30
DB_STATEMENT_TIMEOUT=60000
ENABLE_QUERY_LOGGING=false  # Set to true for debugging

# =================================================================
# STARTUP VALIDATION
# =================================================================
# These settings control startup behavior
RUN_MIGRATIONS=true
VALIDATE_CONFIG_ON_START=true
PRELOAD_AI_MODELS=false
WARM_UP_CACHE=true

# Health check settings
HEALTH_CHECK_TIMEOUT=30
HEALTH_CHECK_DEPENDENCIES=database,redis
ENABLE_DETAILED_HEALTH_CHECKS=true